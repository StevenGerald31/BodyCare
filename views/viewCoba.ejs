<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />

    <!-- bootstrap -->
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css"
      rel="stylesheet"
      integrity="sha384-1BmE4kWBq78iYhFldvKuhfTAU6auU8tT94WrHftjDbrCEXSU1oBoqyl2QvZ6jIW3"
      crossorigin="anonymous"
    />
    <script
      src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js"
      integrity="sha384-ka7Sk0Gln4gmtz2MlQnikT1wXgYsOg+OMhuP+IlRH9sENBO0LRn5q+8nbTov4+1p"
      crossorigin="anonymous"
    ></script>

    <!-- CSS -->
    <link rel="stylesheet" href="<%= baseUrl %>/stylesheets/style.css" />

    <!-- Jquery -->
    <script
      src="https://code.jquery.com/jquery-3.7.1.min.js"
      integrity="sha256-/JqT3SQfawRcv/BIHPThkBvs0OEvtFFmqPF/lYI/Cxo="
      crossorigin="anonymous"
    ></script>

    <title>Document</title>
  </head>
  <body>
    <!-- Header Section Start -->
    <header id="header">
      <div class="container">
        <h1>Glow Your Skin</h1>
        <!-- Uncomment below if you prefer to use an image logo -->
        <!-- <a href="index.html" class="mr-auto"><img src="assets/img/logo.png" alt="" class="img-fluid"></a> -->
        <h2>
          <span>Welcome to Glow Your Skin!!</span>
          <p>
            Temukan keindahan alami melalui produk perawatan tubuh kami yang
            dirancang untuk menyegarkan dan merawat kecantikan Anda.
          </p>
        </h2>

        <nav id="navbar" class="navbar">
          <ul>
            <li><a class="nav-link active" href="#header">Home</a></li>
            <li><a class="nav-link" href="#penjelajahan">Penjelajahan</a></li>
            <li><a class="nav-link" href="#pencarian">Pencarian</a></li>
            <li><a class="nav-link" href="#rekomendasi">Rekomendasi</a></li>
          </ul>
          <i class="bi bi-list mobile-nav-toggle"></i>
        </nav>
      </div>
    </header>

    <!-- ---------------------------------- -->
    <!--        Penjelajahan Start          -->
    <!-- ---------------------------------- -->
    <section id="penjelajahan" class="penjelajahan">
      <div class="penjelajahan container">
        <div class="section-title">
          <p>Penjelajahan</p>
        </div>

        <div class="row h-100">
          <!-- <div class="col-lg-4" data-aos="fade-right">
            <img src="assets/img/me.png" class="img-fluid" alt="" />
          </div> -->
          <div class="col-lg-12 pt-4 pt-lg-0 content" data-aos="fade-left">
            <!-- <h3>Data Analyst &amp; Web Developer</h3> -->
            <p class="fst-italic">
              rtgrhxstjdtrghadftgaswertfargertherthfyeart
            </p>

            <p>
              As a budding web enthusiast, I enjoy creating captivating and
              user-friendly websites that combine aesthetics with functionality.
              I believe that effective web development is about blending
              creativity and technical expertise to engage users effectively. On
              the data side of things, I'm enthusiastic about harnessing the
              power of Python to work with data, extract valuable insights, and
              make informed decisions. I see data analysis as a way to unlock
              hidden patterns and drive meaningful outcomes.
            </p>

            <div class="row">
              <div class="col-sm-2 d-flex align-item-center">
                <h2>Pilih Merk :</h2>
              </div>
              <div class="col-md-10">
                <div class="dropdown">
                  <button
                    class="btn bg-white"
                    type="button"
                    id="dropdownMenuButton1"
                    data-bs-toggle="dropdown"
                    aria-expanded="false"
                  >
                    <h6 id="selectedMerek">Pilihan Merk</h6>
                    <img src="/images/dropdown.png" alt="" />
                  </button>
                  <ul
                    class="dropdown-menu"
                    aria-labelledby="dropdownMenuButton1"
                    style="width: 500px"
                    id="merekListDropdown"
                  ></ul>
                </div>
              </div>
            </div>
            <div class="row m-2">
              <table class="table table-striped" id="resultTable">
                <tr>
                  <th>Usia</th>
                  <th>harga</th>
                  <th>Manfaat</th>
                  <th>Masalah Kulit</th>
                </tr>
              </table>
            </div>
          </div>
        </div>
      </div>
    </section>
    <!-- ---------------------------------- -->
    <!--         Penjelajahan End           -->
    <!-- ---------------------------------- -->

    <!-- ---------------------------------- -->
    <!--          Pencarian Start           -->
    <!-- ---------------------------------- -->
    <section id="pencarian" class="pencarian">
      <div class="Pencarian container">
        <div class="section-title">
          <p>Pencarian</p>
        </div>

        <div class="row">
          <!-- <div class="col-lg-4" data-aos="fade-right">
            <img src="assets/img/me.png" class="img-fluid" alt="" />
          </div> -->
          <div class="col-lg-12 pt-4 pt-lg-0 content" data-aos="fade-left">
            <!-- <h3>Data Analyst &amp; Web Developer</h3> -->
            <p class="fst-italic">
              rtgrhxstjdtrghadftgaswertfargertherthfyeart
            </p>

            <p>
              As a budding web enthusiast, I enjoy creating captivating and
              user-friendly websites that combine aesthetics with functionality.
              I believe that effective web development is about blending
              creativity and technical expertise to engage users effectively. On
              the data side of things, I'm enthusiastic about harnessing the
              power of Python to work with data, extract valuable insights, and
              make informed decisions. I see data analysis as a way to unlock
              hidden patterns and drive meaningful outcomes.
            </p>

            <div class="row">
              <div class="col-sm-5 d-flex align-item-center">
                <h2>Pilih Merk :</h2>
              </div>
              <div class="col-md-7">
                <div class="dropdown">
                  <button
                    class="btn bg-white"
                    type="button"
                    id="dropdownMenuButton1"
                    data-bs-toggle="dropdown"
                    aria-expanded="false"
                  >
                    <h6>Pilihan Merk</h6>
                    <img src="/images/dropdown.png" alt="" />
                  </button>
                  <ul
                    class="dropdown-menu"
                    aria-labelledby="dropdownMenuButton1"
                    style="width: 500px"
                  >
                    <li>
                      <a class="dropdown-item" href="#"
                        >Sensanatia Botanicals</a
                      >
                    </li>
                    <li>
                      <a class="dropdown-item" href="#">Herborist</a>
                    </li>
                    <li>
                      <a class="dropdown-item" href="#">Bali Alus</a>
                    </li>
                    <li>
                      <a class="dropdown-item" href="#">Grace and Glow</a>
                    </li>
                    <li>
                      <a class="dropdown-item" href="#">Marina</a>
                    </li>
                    <li>
                      <a class="dropdown-item" href="#">Scarlett Whitening</a>
                    </li>
                    <li>
                      <a class="dropdown-item" href="#">Erha</a>
                    </li>
                    <li>
                      <a class="dropdown-item" href="#">Bali Ratih</a>
                    </li>
                  </ul>
                </div>
              </div>
            </div>

            <!-- pilih jenis Bodycare -->
            <div class="row mt-2">
              <div class="col-sm-5 d-flex align-item-center">
                <h2>Pilih Jenis BodyCare :</h2>
              </div>
              <div class="col-md-7">
                <div class="dropdown">
                  <button
                    class="btn bg-white"
                    type="button"
                    id="dropdownMenuButton1"
                    data-bs-toggle="dropdown"
                    aria-expanded="false"
                  >
                    <h6>Pilihan Jenis Bodycare</h6>
                    <img src="/images/dropdown.png" alt="" />
                  </button>
                  <ul
                    class="dropdown-menu"
                    aria-labelledby="dropdownMenuButton1"
                    style="width: 500px"
                  ></ul>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </section>
    <!-- ---------------------------------- -->
    <!--           Pencarian End            -->
    <!-- ---------------------------------- -->

    <!-- ---------------------------------- -->
    <!--         Rekomendasi Start          -->
    <!-- ---------------------------------- -->
    <section id="rekomendasi" class="rekomendasi">
      <div class="rekomendasi container">
        <div class="section-title">
          <p>Rekomendasi</p>
        </div>

        <div class="row">
          <!-- <div class="col-lg-4" data-aos="fade-right">
            <img src="assets/img/me.png" class="img-fluid" alt="" />
          </div> -->
          <div class="col-lg-12 pt-4 pt-lg-0 content" data-aos="fade-left">
            <!-- <h3>Data Analyst &amp; Web Developer</h3> -->
            <p class="fst-italic">
              rtgrhxstjdtrghadftgaswertfargertherthfyeart
            </p>

            <p>
              As a budding web enthusiast, I enjoy creating captivating and
              user-friendly websites that combine aesthetics with functionality.
              I believe that effective web development is about blending
              creativity and technical expertise to engage users effectively. On
              the data side of things, I'm enthusiastic about harnessing the
              power of Python to work with data, extract valuable insights, and
              make informed decisions. I see data analysis as a way to unlock
              hidden patterns and drive meaningful outcomes.
            </p>
          </div>
        </div>
      </div>
    </section>

    <!-- Script -->
    <script src="<%= baseUrl %>/vendor/purecounter/purecounter_vanilla.js"></script>
    <script src="<%= baseUrl %>/vendor/glightbox/js/glightbox.min.js"></script>
    <script src="<%= baseUrl %>/vendor/isotope-layout/isotope.pkgd.min.js"></script>
    <script src="<%= baseUrl %>/vendor/swiper/swiper-bundle.min.js"></script>
    <script src="<%= baseUrl %>/vendor/waypoints/noframework.waypoints.js"></script>
    <script src="<%= baseUrl %>/vendor/php-email-form/validate.js"></script>

    <script>
      (function () {
        "use strict";

        /**
         * Easy selector helper function
         */
        const select = (el, all = false) => {
          el = el.trim();
          if (all) {
            return [...document.querySelectorAll(el)];
          } else {
            return document.querySelector(el);
          }
        };

        /**
         * Easy event listener function
         */
        const on = (type, el, listener, all = false) => {
          let selectEl = select(el, all);

          if (selectEl) {
            if (all) {
              selectEl.forEach((e) => e.addEventListener(type, listener));
            } else {
              selectEl.addEventListener(type, listener);
            }
          }
        };

        /**
         * Scrolls to an element with header offset
         */
        const scrollto = (el) => {
          window.scrollTo({
            top: 0,
            behavior: "smooth",
          });
        };

        /**
         * Mobile nav toggle
         */
        on("click", ".mobile-nav-toggle", function (e) {
          select("#navbar").classList.toggle("navbar-mobile");
          this.classList.toggle("bi-list");
          this.classList.toggle("bi-x");
        });

        /**
         * Scrool with ofset on links with a class name .scrollto
         */
        on(
          "click",
          "#navbar .nav-link",
          function (e) {
            let section = select(this.hash);
            if (section) {
              e.preventDefault();

              let navbar = select("#navbar");
              let header = select("#header");
              let sections = select("section", true);
              let navlinks = select("#navbar .nav-link", true);

              navlinks.forEach((item) => {
                item.classList.remove("active");
              });

              this.classList.add("active");

              if (navbar.classList.contains("navbar-mobile")) {
                navbar.classList.remove("navbar-mobile");
                let navbarToggle = select(".mobile-nav-toggle");
                navbarToggle.classList.toggle("bi-list");
                navbarToggle.classList.toggle("bi-x");
              }

              if (this.hash == "#header") {
                header.classList.remove("header-top");
                sections.forEach((item) => {
                  item.classList.remove("section-show");
                });
                return;
              }

              if (!header.classList.contains("header-top")) {
                header.classList.add("header-top");
                setTimeout(function () {
                  sections.forEach((item) => {
                    item.classList.remove("section-show");
                  });
                  section.classList.add("section-show");
                }, 350);
              } else {
                sections.forEach((item) => {
                  item.classList.remove("section-show");
                });
                section.classList.add("section-show");
              }

              scrollto(this.hash);
            }
          },
          true
        );

        /**
         * Activate/show sections on load with hash links
         */
        window.addEventListener("load", () => {
          if (window.location.hash) {
            let initial_nav = select(window.location.hash);

            if (initial_nav) {
              let header = select("#header");
              let navlinks = select("#navbar .nav-link", true);

              header.classList.add("header-top");

              navlinks.forEach((item) => {
                if (item.getAttribute("href") == window.location.hash) {
                  item.classList.add("active");
                } else {
                  item.classList.remove("active");
                }
              });

              setTimeout(function () {
                initial_nav.classList.add("section-show");
              }, 350);

              scrollto(window.location.hash);
            }
          }
        });
      })();

      $(document).ready(function () {
        fetch(`http://localhost:3000/web/api/merek`)
          .then((respons) => respons.json())
          .then((merekList) => {
            // masukan ke dalam dropdown
            const dropdown = document.querySelector(".dropdown-menu");
            // merekList.forEach((merek) => {
            //   const merekItem = document.createElement("li");
            //   merekItem.innerHTML = `<a class="dropdown-item" href="#">${merek}</a>`;
            // const dropdown = document.getElementById("merekListDropdown");

            merekList.forEach((merek) => {
              const merekItem = document.createElement("li");
              merekItem.innerHTML = `<a class="dropdown-item" href="#">${merek}</a>`;
              // tambahkan event listener
              merekItem.addEventListener("click", () => {
                selectMerek(merek);
              });
              dropdown.appendChild(merekItem);
            });
          })
          .catch((error) => {
            console.error("Error fetching merek list:", error);
          });
      });

      // jika user memilih merek dari drop down
      function selectMerek(merek) {
        // hapus semua merek yang ada di tabel
        const table = document.getElementById("resultTable");
        const rowCount = table.rows.length;
        for (let i = 1; i < rowCount; i++) {
          table.deleteRow(1);
        }

        // ambil data dari api dengan query merek
        fetch(`http://localhost:3000/web/api/query-by-merek?merek=${merek}`)
          .then((respons) => respons.json())
          .then((bodycareList) => {
            console.log(bodycareList[0]);
            // masukan ke dalam tabel
            bodycareList.forEach((bodycare) => {
              const row = table.insertRow(-1);
              const usiaCell = row.insertCell(0);
              const hargaCell = row.insertCell(1);
              const manfaatCell = row.insertCell(2);
              const masalahCell = row.insertCell(3);

              usiaCell.innerHTML = bodycare.Usia.value;
              const parseharga = parseInt(bodycare.Harga.value);
              const formattedHarga = parseharga.toLocaleString("id-ID");
              hargaCell.innerHTML = `Rp${formattedHarga}`;
              manfaatCell.innerHTML = bodycare.Manfaat.value;
              masalahCell.innerHTML = bodycare.Masalah.value;

              $("#selectedMerek").html(merek);
            });
          })
          .catch((error) => {
            console.error("Error fetching bodycare list:", error);
          });
      }
    </script>
  </body>
</html>
